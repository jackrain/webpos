var Accessor = require("Accessor");
var async = require('async')
var tester=new Accessor("todo"); 

var spawn = require('child_process');

child = spawn.spawn('ls', ['-lh', '/usr']);
child.stdout.setEncoding('utf8');
child.stdout.on('data', function(data) {
  console.log(data);
});

var register_methods = ["SELECT", "DELETE", "CREATE", "UPDATE","INSERT"];
  tester.registerObserver(register_methods, function(event){
        console.log("jioasdjfiosajdjfsio");
    });
    var dataObject = {
        //name: "bu",
        //email: "bu@hax4.in",
        title: "test"
    };
    //console.log(456);
    setTimeout(function(){
    tester.insert( dataObject, function(err, info) {
        if(err) {
           throw err;
        } 
       // console.log(info);
        return info.insertId;
    } );},100);
 

// async.series({
//     one: function(callback){
//         count=count+1;
//        //setTimeout(function(){
//             //console.log(123);
//             tester= new Accessor("todo");
//             callback(null, tester);
//        // }, 5000);
//     },
//     two: function(callback){
//        setTimeout(function(){
//         //console.log(456);
          
//         //}, 100);
//     var dataObject = {
//         //name: "bu",
//         //email: "bu@hax4.in",
//         title: "test"
//     };
//         tester.insert( dataObject, function(err, info) {
//         if(err) {
//            throw err;
//         } 
//         console.log(info);
//         return info.insertId;
//     } );

//    count=count+1;
//     callback(null, tester);
//     }, 20);
//     }
// },
// function(err, results) {
//           if(err) {
//             throw err;}
//             t.log('1.1 results: ', results); 
//            // console.log(results);
//     // results is now equal to: {one: 1, two: 2}
// });

// async.series([

//   function() {  
//     //  tester= new Accessor("todo");
//     console.log(123);
//   },
  // function() { 
  //   var dataObject = {
  //       //name: "bu",
  //       //email: "bu@hax4.in",
  //       title: "test"
  //   };
  //   console.log(456);
  //   tester.insert( dataObject, function(err, info) {
  //       if(err) {
  //          throw err;
  //       } 
  //       console.log(info);
  //       return info.insertId;
  //   } );
  //  } 
// ], function(err, values) {
//             if(err) {
//            throw err;
//         } 
//      console.log(err);
// // do somethig with the err or values v1/v2/v3
// });



// var sqlite3 = require('sqlite3').verbose();
// var db = new sqlite3.Database('chain.sqlite3');   
// // 或者
// // var db = new sqlite3.Database('todo.db');  

// db.serialize(function() {
//   // 建表
//   db.run("CREATE TABLE IF NOT EXISTS todo (title TEXT)");

//   // 插入数据
//   var stmt = db.prepare("INSERT INTO todo(title) VALUES (?)");
//   stmt.run('起床1');
//   stmt.run('洗刷2');
//   stmt.finalize();
  
//   // db.all("SELECT rowid AS id, title FROM todo", function(err, rows) {
//   //   console.log(rows);  //  [ { id: 1, title: '起床' }, { id: 2, title: '洗刷' } ]
//   //   rows.forEach(function (row) {
//   //     console.log(row.title);
//   //   });
//   // });

//   //或者
//   db.each("SELECT rowid AS id, title FROM todo", function(err, row) {
//      console.log(row.id + ": " + row.title);
//   });
// });
// db.close();