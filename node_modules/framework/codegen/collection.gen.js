/***************************************************
 * 名称：Webpos2.0代码生成工具
 * 描述：主要用于生成ModelCollection
 **************************************************/
var IOUtil = require('fs-extra');
var PathUtil = require('path');
var StrUtil = require('../lib/string.js');
var GenUtil = require('./gen.util.js');
var ModelCollectionGener = function () { }

ModelCollectionGener.prototype.CodeGen = function (context) {
    console.log("start gen collection " + context.TableName);
    var path = PathUtil.join(__dirname, 'templates', 'collection.template');
    var template = GenUtil.ReadTemplate(path);
    //保存文件
    var savePath = PathUtil.join(context.BaseDIR, "collections", context.TableName + ".collection.js");
    template = StrUtil.Format(template, context.TableName, context.Version, context.TableName, context.TableName);
    GenUtil.SaveFile(savePath, template);
    console.log("gened collection " + context.TableName);
}

module.exports = new ModelCollectionGener();
