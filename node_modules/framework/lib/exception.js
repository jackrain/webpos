/*****************************************************
 * 名称：异常创建类
 * 日期：2014-11-20
 * 描述：无
 * 作者：Beven
 * **************************************************/
var StrUtil = require('./string.js');
//异常创建对象
ErrorBuilder = function () { }

var unknow = { message: '未知异常', code: -1 };
//创建异常构建对象实例
var builder = module.exports = new ErrorBuilder();

//错误类型定义列表
ErrorBuilder.prototype.Errors = {};

/*
 * 名称：创建一个异常对象
 * 参数(code)：错误编码 对应ErrorBuilder.prototype.Errors中定义的异常信息
 * 参数(arg1-argN)：当编码对应的异常消息中带有占位符的话，可以使用此参数去填充
 */
ErrorBuilder.prototype.Error = function (code, arg1, arg2) {
    var errors = this.Errors;
    var info = errors[code] || unknow;
    var args = Array.prototype.splice(1);
    return new Error(StrUtil.Format.call(StrUtil, info.message, args));
}

ErrorBuilder.prototype.Errors = {
    '1000': '表 或者列不存在',
    '3000': '事务没有结束,无法重新开启',
    '3001': '事务计数器不匹配',
    '4000': '没有数据库连接,请检查是否配置连接路径',
    '5000': '非法操作：{0}',
    '6000': '已存在同名的校验器：{0}'
}